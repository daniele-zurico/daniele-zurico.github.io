{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/angular-custom-elements-with-cli","result":{"data":{"markdownRemark":{"html":"<p>Few posts ago I described how to create an angular material data table and how to publish it as a library. As we're really proud about that, and also a bit lazy, I was wondering if it's possible to be used with other frameworks like react, vue.js and why not in pure html page. Yes Daniele, great idea! But you built it with angular, how can you aim to use that everywhere? The reply is <strong>Custom Elements</strong> :) For who is new to them, Custom elements are a Web Platform feature currently supported by Chrome, Opera, and Safari, and available in other browsers through polyfills. A custom element extends HTML by allowing you to define a tag whose content is created and controlled by JavaScript code. The browser maintains a CustomElementRegistry of defined custom elements (also called Web Components), which maps an instantiable JavaScript class to an HTML tag. In the latest version angular have added a new package called <strong>@angular/elements</strong> an API that provides a bridge from Angular's component interface and change detection functionality to the built-in DOM API. The problem, until yesterday, was that @angular/cli is not able to provide a single bundle so you need to package your \"custom element\" on your own. I said until yesterday because after few drinks I decided to go to sleep and on twitter I saw something like that: <span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/daniele-zurico.github.io/static/04c8994e443f567dc7b508d21fa7dc3c/0a47e/Screen-Shot-2018-06-10-at-17.08.37.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.42857142857143%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQ0lEQVQ4y22Ty67bRBzG8xKseAI2SBVv0D4BYl8JiQ2oEizaRTkSYsGRWCC6Y8ECzgaBjsQOxCnd0ApI0viW2HHsiW/HiePY8SVOPLbn5kF2Dipw+Cz9Rx7pNzP/75sZZOHq+dOfV+uN67pBEFiWHccx/7favnoH8pMHr3z4W1DRtpsb6OMXD++/o2gLYDmm5SyAVRTFf2Da01d+9f6L3eNRejbOKkw7uEY4zvI8z1dBEASbYBMWRZEkSZKmSZput9td/9P2WzWsrWl7WquDScsrxos8ByZwXc8wjG0UmebSdRzf8xzb9lzXtm3GGL+lAWEtJAwRWiGMMWaMYUwwQg3je8YJ54hzzBhqOtV1XZYlpfQV3LR8E+0My1VkeTQaT1VVmkyGwL9yD8+c/KlbCFawNA3Ltg3TnKkqhPAGxqxFLZ9b3i/Ph9PpFCyX2200namKothLcO37gijquj4av0zTlHPOGGOUnSwYoL79Szn44lddU2RtrtuOY5qmLCvAsvrwLEWZzvVuXtPmACznup5lWQc3pHPiy2fqw8s/FqoiSgoAQBAlQZQmE0FWppOJIIqSNp8rylQQREmWJVk2AWjbtjt2w7jpb4YqmCqKKEnKdCZKkqpqvUMNQp1ZEMLD8Vh2X1lCWJawN4yymvPVTLSFP38fjQVRsh13NlMFUbr2V8EmNEyQJF23pz5vRcU4ylMYh0mW79OkORZFlmyDdbqL90m8DcNjWfL/UwdXlEdRvFoHSRiu97WWU69s/YqvYGuXPCrKYL3SklrPsbXHVkHcA94jdgPXjG92O329XuWZXeN52RoZMnLsHYiW0+tt4rkuyJCSYLDHywI7B1KSE0zbkvOjZvjffL++uAwvfqDmknPW4oahpqs396nlnHW1ZV3YlDLGBgRTyPn6g0fgzt3N48+Wb91zP/zYyVJgGCYAC8OM47h3u6rqGsLTWCOMCSEDQjrYf++j/LsfoaKFZ+f+o09V33s5HIqiKEmS7/tRFIVhmCRJEARRFO12OwghpfRv+N0H6VcXydffem/fD8/O95wnu7RpECHkdkKn2F7tHHzyufb6m4s792avvRGcPyGcN1XVH41ijBHqX9w/hFC37l9mxgN5ONA9GAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Screen Shot 2018 06 10 at 17 08 37\"\n        title=\"Screen Shot 2018 06 10 at 17 08 37\"\n        src=\"/daniele-zurico.github.io/static/04c8994e443f567dc7b508d21fa7dc3c/0a47e/Screen-Shot-2018-06-10-at-17.08.37.png\"\n        srcset=\"/daniele-zurico.github.io/static/04c8994e443f567dc7b508d21fa7dc3c/4edbd/Screen-Shot-2018-06-10-at-17.08.37.png 175w,\n/daniele-zurico.github.io/static/04c8994e443f567dc7b508d21fa7dc3c/13ae7/Screen-Shot-2018-06-10-at-17.08.37.png 350w,\n/daniele-zurico.github.io/static/04c8994e443f567dc7b508d21fa7dc3c/0a47e/Screen-Shot-2018-06-10-at-17.08.37.png 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span> First thing I tought:\"Ok I'm drunk\"... but after a bit I realised that it was true and the day after I decided to give a try.</p>\n<p>As usual let's create a cli project:</p>\n<p>ng new material-table-custom-element</p>\n<p>We add angular material:</p>\n<p>ng add @angular/material</p>\n<p>And we generate our table with schematics:</p>\n<p>ng generate @angular/material:material-table --name mat-table</p>\n<p>Our data table is ready now, we need to add custom element support:</p>\n<p>ng add @angular/elements\nnpm install @webcomponents/custom-elements --save</p>\n<p>and export it as ngx-data-table [gist id=\"a604988502b5f52475fe6a80c93b2e35\"]</p>\n<p>Last step is to package it with the great work of Manfred:</p>\n<p>npm install ngx-build-plus --save-dev</p>\n<p>Change our <strong>angular.json</strong>:</p>\n<p>\"architect\": {\n\"build\": {\n\"builder\": \"ngx-build-plus:build\",</p>\n<p>Create a file <strong>webpack.extra.js</strong> with a partial webpack config that tells webpack to exclude packages like @angular/core:</p>\n<p>[gist id=\"b5be0241b0a199db0949be7cbc4810ce\"]</p>\n<p>And finally build it:</p>\n<p>ng build --prod --extraWebpackConfig webpack.extra.js --output-hashing none</p>\n<p>I created a <a href=\"https://github.com/daniele-zurico/angular-material-table-custom-element\">repro on gitHub</a> in case you got lost somewhere!</p>\n<p>If you enjoyed this post follow me <a href=\"https://twitter.com/DZurico\">@DZurico</a> ;)</p>\n<h2>Resources:</h2>\n<p>- <a href=\"https://www.npmjs.com/package/ngx-build-plus\">https://www.npmjs.com/package/ngx-build-plus</a></p>","frontmatter":{"date":"June 10, 2018","path":"/blog/angular-custom-elements-with-cli","title":"Angular custom elements with Cli","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIB/8QAFgEBAQEAAAAAAAAAAAAAAAAABAID/9oADAMBAAIQAxAAAAGdyknkaR//xAAYEAACAwAAAAAAAAAAAAAAAAAAARARQf/aAAgBAQABBQIVzh//xAAWEQADAAAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8BgX//xAAWEQEBAQAAAAAAAAAAAAAAAAABAhD/2gAIAQIBAT8Bac//xAAWEAEBAQAAAAAAAAAAAAAAAAARACD/2gAIAQEABj8Ckz//xAAaEAACAgMAAAAAAAAAAAAAAAABERAxACFB/9oACAEBAAE/IVp8wEsAuReP/9oADAMBAAIAAwAAABDwD//EABkRAAIDAQAAAAAAAAAAAAAAAAERACFRsf/aAAgBAwEBPxA1DQ+wp1P/xAAYEQEAAwEAAAAAAAAAAAAAAAABEBFhsf/aAAgBAgEBPxAAu1yP/8QAGxAAAgMAAwAAAAAAAAAAAAAAAREAITFBUYH/2gAIAQEAAT8QbAoU+HCiAtJUISjdRnHXUMoZTzyZP//Z","aspectRatio":2,"src":"/daniele-zurico.github.io/static/ed9849651febb7ed63d902fb3808a102/14b42/custm-elements.jpg","srcSet":"/daniele-zurico.github.io/static/ed9849651febb7ed63d902fb3808a102/f836f/custm-elements.jpg 200w,\n/daniele-zurico.github.io/static/ed9849651febb7ed63d902fb3808a102/2244e/custm-elements.jpg 400w,\n/daniele-zurico.github.io/static/ed9849651febb7ed63d902fb3808a102/14b42/custm-elements.jpg 800w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{}},"staticQueryHashes":["1135375505","3206378567"]}