{"componentChunkName":"component---src-templates-blog-template-js","path":"/blog/angular-lazy-load-modules-with-cli","result":{"data":{"markdownRemark":{"html":"<p>In my previous company we created a project that was built with widgets. A page was just a container with placeholder and in each placeholder there was a configurable widget that could be added or removed based on a json config file. The main challenge was to load these widgets lazily and it was quite hard because cli was not able to do that by default so we end-up hacking the code a little bit creating the same approach of the routing.(<a href=\"https://angular.io/guide/lazy-loading-ngmodules\">https://angular.io/guide/lazy-loading-ngmodules</a>)</p>\n<p>Finally with the new version of cli we can achieve it without too much effort and quite easily.</p>\n<p>As usual the first thing is to setup a new project with angular-cli (make sure that you have 6.0.1 installed):</p>\n<p><code>ng new lazyApp</code></p>\n<p>When your project is up and running we need to create a new module and then a new component:</p>\n<p><code>ng g module lazy ng g component lazy</code></p>\n<p>We need to apply some changes on the module and implement the loading in the component. We start lazy.module.ts and we need to apply these small changes:</p>\n<p>[gist id=\"3a015f6485994b45e5cdef63be163408\"]</p>\n<p>We defined which one is our entryComponents and a static variable called `entry`.</p>\n<p>Now that our module is ready we need to load it dynamically and lazy loading the resource on demand.</p>\n<p>Open app.component.ts and copy that:</p>\n<p>[gist id=\"3e35f14784b65aafe7853d6e8df4f2f9\"]</p>\n<p>Nothing new I can say. We created a viewChild called testOutlet and we load the module and the component.</p>\n<p>We need to make the last change on the code to define the `testOutlet` in our template. Open the app.component.html remove all the content and paste the follow code:</p>\n<p>[gist id=\"b4ee0bb2cfe6c9f08508fe32b3f9f4a6\"]</p>\n<p>We almost done it's just missing the magic part: the cli configuration!</p>\n<p>Open angular.json and in the build section paste the following:</p>\n<p>[gist id=\"56214a92e5c57ec9fe56a46b0d5a129e\"]</p>\n<p>Now we can see the result running as usual:</p>\n<p><strong>ng serve</strong></p>\n<p>And we'll see our lazy loaded module:</p>\n<p>[caption id=\"attachment_7250\" align=\"aligncenter\" width=\"776\"]<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/a52aa/lazy-module.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdyACf/EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABgQAQADAQAAAAAAAAAAAAAAAAEAEVEh/9oACAEBAAE/IWrZzIDs/9oADAMBAAIAAwAAABCD3//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxDEf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEAAwEAAAAAAAAAAAAAAAERACFRMf/aAAgBAQABPxDXIWdwAPtHuMpRGbM//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lazy module\"\n        title=\"lazy module\"\n        src=\"/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/29d31/lazy-module.jpg\"\n        srcset=\"/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/e52aa/lazy-module.jpg 175w,\n/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/70ebb/lazy-module.jpg 350w,\n/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/29d31/lazy-module.jpg 700w,\n/daniele-zurico.github.io/static/b426b45bbf20bdfaf691a063a505e43d/a52aa/lazy-module.jpg 932w\"\n        sizes=\"(max-width: 700px) 100vw, 700px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span> lazy-module[/caption]</p>\n<p>In case of problem I just created a <a href=\"https://github.com/daniele-zurico/lazy-load-cli\">repro</a> in my github! Feel free to download it!</p>\n<p>If you enjoyed this post follow me on twitter <a href=\"https://twitter.com/DZurico\">@Dzurico</a></p>","frontmatter":{"date":"May 21, 2018","path":"/blog/angular-lazy-load-modules-with-cli","title":"Angular - Lazy load modules with cli","featuredImage":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAE/8QAFgEBAQEAAAAAAAAAAAAAAAAABAAC/9oADAMBAAIQAxAAAAHUZiZaxVv/xAAaEAACAgMAAAAAAAAAAAAAAAACEQABEBIi/9oACAEBAAEFAiaITjKo+trx/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/ARV//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/AVdtb//EABkQAAIDAQAAAAAAAAAAAAAAAAAQAQIiMf/aAAgBAQAGPwLJCudX/8QAHBABAAICAwEAAAAAAAAAAAAAAQARITFBcZHB/9oACAEBAAE/IbNi3WIAyXqLKVIrbx9iu17N5cz/2gAMAwEAAgADAAAAEHsf/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARQf/aAAgBAwEBPxAQzpf/xAAXEQEBAQEAAAAAAAAAAAAAAAABABFR/9oACAECAQE/EHvGOl//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRwf/aAAgBAQABPxApsG7w+MTC2b5fsbPjpYFBG3HukBVaWCrJboU8q2z/2Q==","aspectRatio":1.7699115044247788,"src":"/daniele-zurico.github.io/static/c9f99c3285e5baadbc9a5622a3459cb3/7f018/lazy-load.jpg","srcSet":"/daniele-zurico.github.io/static/c9f99c3285e5baadbc9a5622a3459cb3/f836f/lazy-load.jpg 200w,\n/daniele-zurico.github.io/static/c9f99c3285e5baadbc9a5622a3459cb3/2244e/lazy-load.jpg 400w,\n/daniele-zurico.github.io/static/c9f99c3285e5baadbc9a5622a3459cb3/7f018/lazy-load.jpg 704w","sizes":"(max-width: 704px) 100vw, 704px"}}}}}},"pageContext":{}},"staticQueryHashes":["1135375505","3206378567"]}